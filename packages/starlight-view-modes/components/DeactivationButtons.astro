<style is:global>
    :is(#zen-mode-off, #presentation-mode-off) {
        position: fixed;
        width: 3rem;
        height: 3rem;
        
        cursor: pointer;

        padding: 0.5rem;
        background: var(--sl-color-bg);
        border: 2px solid var(--sl-color-gray-1);
        border-radius: 0.5rem;

        color: currentColor;
        box-shadow: 0px 0px none;

        display: flex;
        justify-content: center;
        align-self: center;

        -webkit-transition: color 300ms linear, background-color 300ms linear, box-shadow 300ms linear;
        -ms-transition: color 300ms linear, background-color 300ms linear, box-shadow 300ms linear;
        transition: color 300ms linear, background-color 300ms linear, box-shadow 300ms linear;

        z-index: 1000;
    }


    :is(#zen-mode-off, #presentation-mode-off):hover {
        background: var(--sl-color-gray-1);
        color: var(--sl-color-gray-6);
        box-shadow: 8px 8px var(--sl-color-gray-4);
    }

    :is(#zen-mode-off, #presentation-mode-off) > svg {
        transform: translateY(0.2em);
    }

    body:not(.zen-mode) #zen-mode-off {
        display: none;
    }

    body:not(.presentation-mode) #presentation-mode-off {
        display: none;
    }
</style>


  
<script>
    import config from 'virtual:starlight-view-modes-config'

    document.addEventListener('DOMContentLoaded', () => {
        var body = document.body;

        var zenModeOffElement = document.createElement("a");
        zenModeOffElement.id = "zen-mode-off";
        zenModeOffElement.innerHTML = `
            <svg width="24" height="24" viewBox="0 0 800 800" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M483.333 150C483.333 196.023 446.023 233.333 400 233.333C353.977 233.333 316.667 196.023 316.667 150C316.667 103.976 353.977 66.6665 400 66.6665C446.023 66.6665 483.333 103.976 483.333 150Z" stroke="currentColor" stroke-width="50"/>
            <path d="M700 566.666L613.703 523.06C605.307 518.816 600 510.143 600 500.653C600 442.741 575.107 389.778 535 352.819" stroke="currentColor" stroke-width="50" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M100 566.667L186.296 523.06C194.695 518.817 200 510.143 200 500.653C200 402.673 271.257 318.858 366.89 302.75C388.66 299.083 411.34 299.083 433.11 302.75C449.168 305.455 464.539 310.068 479 316.337" stroke="currentColor" stroke-width="50" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M367.333 683L361.273 687.547C345.293 699.53 337.303 705.523 328.863 710.43C309.125 721.9 287.24 729.197 264.567 731.86C254.872 733 244.885 733 224.909 733H173.039C166.531 733 160.395 731.408 155 728.592M367.333 683L434 633M367.333 683L451.99 714.747C472.303 722.363 482.463 726.173 492.96 728.627C498.393 729.897 503.887 730.893 509.417 731.61C520.107 733 530.957 733 552.653 733H628.293C649.857 733 667.333 715.523 667.333 693.96C667.333 658.133 642.95 626.903 608.193 618.213L558.7 605.84C556.987 605.413 556.127 605.2 555.3 604.97C541.68 601.187 529.617 593.177 520.847 582.093C520.317 581.42 519.783 580.71 518.723 579.3L484 533" stroke="currentColor" stroke-width="50" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M85 715.68L715.68 84.9999" stroke="currentColor" stroke-width="50" stroke-linecap="round"/>
            <mask id="mask0_526_2" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="225" y="520" width="130" height="115">
                <path d="M231.84 633.965C226.915 635.215 223.482 629.176 227.074 625.583L330.748 521.91C333.21 519.447 337.374 520.194 338.827 523.359L354.5 557.5L277 622.5L231.84 633.965Z" fill="#D9D9D9"/>
            </mask>
            <g mask="url(#mask0_526_2)">
                <path d="M316.333 533L281.609 579.3C280.549 580.713 280.019 581.419 279.485 582.093C270.716 593.176 258.652 601.186 245.034 604.969C244.205 605.199 243.347 605.413 241.634 605.84L192.141 618.213" stroke="currentColor" stroke-width="50" stroke-linecap="round" stroke-linejoin="round"/>
            </g>
            </svg>
        `;        

        var presentationModeOffElement = document.createElement("a");
        presentationModeOffElement.id = "presentation-mode-off";
        presentationModeOffElement.innerHTML = `
            <svg width="24" height="24" viewBox="0 0 800 800" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M66.6665 66.6665H630" stroke="currentColor" stroke-width="50" stroke-linecap="round"/>
            <path d="M300 350L343.097 306.903C354.207 295.792 359.763 290.237 366.667 290.237C373.57 290.237 379.127 295.792 390.237 306.903L409.763 326.429C415.768 332.434 429.15 344.74 433 347.5" stroke="currentColor" stroke-width="50" stroke-linecap="round"/>
            <path d="M400 700V566.667" stroke="currentColor" stroke-width="50" stroke-linecap="round"/>
            <path d="M333.333 733.333L400 700" stroke="currentColor" stroke-width="50" stroke-linecap="round"/>
            <path d="M466.667 733.333L400 700" stroke="currentColor" stroke-width="50" stroke-linecap="round"/>
            <mask id="mask0_528_2" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="646" y="172" width="53" height="97">
            <path d="M647.885 215.778C646.281 213.789 646.435 210.911 648.242 209.104L683.723 173.623C686.873 170.473 692.258 172.704 692.258 177.158L692.258 235.961C692.258 236.319 692.297 236.676 692.373 237.026L697.995 262.827C699.118 267.981 692.529 271.136 689.218 267.03L647.885 215.778Z" fill="#D9D9D9"/>
            </mask>
            <g mask="url(#mask0_528_2)">
            <path d="M667.333 67V200.333" stroke="currentColor" stroke-width="50" stroke-linecap="round"/>
            </g>
            <path d="M133.333 66.6665V350C133.333 452.136 133.333 503.206 166.807 534.936C181.595 548.954 200.364 556.779 226 561.147M666.667 333.333V350C666.667 452.136 666.667 503.206 633.193 534.936C599.72 566.666 545.843 566.666 438.097 566.666H361.903C353.803 566.666 346.006 566.666 338.5 566.653" stroke="currentColor" stroke-width="50" stroke-linecap="round"/>
            <path d="M85 715.68L715.68 84.9999" stroke="currentColor" stroke-width="50" stroke-linecap="round"/>
            </svg>
        `;

        body.insertBefore(zenModeOffElement, body.firstChild);
        body.insertBefore(presentationModeOffElement, body.firstChild);

        const zenModeOff = document.getElementById('zen-mode-off');
        const presentationModeOff = document.getElementById('presentation-mode-off');

        zenModeOff?.addEventListener('click', () => {
            document.body.classList.remove('zen-mode');
            sessionStorage.removeItem('zenMode');
        });

        presentationModeOff?.addEventListener('click', () => {
            document.body.classList.remove('presentation-mode');
            sessionStorage.removeItem('presentationMode');
        });


        (config.zenModeCloseButtonPosition === 'top-right' || config.zenModeCloseButtonPosition === 'bottom-right') ? zenModeOff?.style.setProperty('right', '1rem') : zenModeOff?.style.setProperty('left', '1rem');
        (config.zenModeCloseButtonPosition === 'top-right' || config.zenModeCloseButtonPosition === 'top-left') ? zenModeOff?.style.setProperty('top', '1rem') : zenModeOff?.style.setProperty('bottom', '1rem');

    });
</script>
  