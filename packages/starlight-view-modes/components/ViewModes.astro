<nav aria-labelledby="starlight__on-this-page" id="view-modes-activation">
  <h2 id="view-modes-activation-heading">Modes</h2>
  <ul id="view-modes-activation-list">
    <li>
      <a id="view-modes-zen-mode-on">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14.5 4.5C14.5 5.88071 13.3807 7 12 7C10.6193 7 9.5 5.88071 9.5 4.5C9.5 3.11929 10.6193 2 12 2C13.3807 2 14.5 3.11929 14.5 4.5Z" stroke="currentColor" stroke-width="1.5"/>
              <path d="M3 17L5.58887 15.6918C5.84084 15.5645 6 15.3043 6 15.0196C6 12.0802 8.1377 9.56573 11.0067 9.0825C11.6598 8.9725 12.3402 8.9725 12.9933 9.0825C15.8623 9.56573 18 12.0802 18 15.0196C18 15.3043 18.1592 15.5645 18.4111 15.6918L21 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9.5 16L8.45827 17.389C8.42647 17.4314 8.41057 17.4526 8.39456 17.4728C8.13149 17.8053 7.76956 18.0456 7.36102 18.1591C7.33616 18.166 7.31042 18.1724 7.25902 18.1852L5.77423 18.5564C4.7315 18.8171 4 19.754 4 20.8288C4 21.4757 4.52435 22 5.17116 22H6.72727C7.32654 22 7.62617 22 7.917 21.9658C8.59721 21.8859 9.25375 21.667 9.84589 21.3229C10.0991 21.1757 10.3388 20.9959 10.8182 20.6364L11 20.5M11 20.5L13 19M11 20.5L13.5397 21.4524C14.1491 21.6809 14.4539 21.7952 14.7688 21.8688C14.9318 21.9069 15.0966 21.9368 15.2625 21.9583C15.5832 22 15.9087 22 16.5596 22H18.8288C19.4757 22 20 21.4757 20 20.8288C20 19.754 19.2685 18.8171 18.2258 18.5564L16.741 18.1852C16.6896 18.1724 16.6638 18.166 16.639 18.1591C16.2304 18.0456 15.8685 17.8053 15.6054 17.4728C15.5895 17.4526 15.5735 17.4313 15.5417 17.389L14.5 16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Activate Zen Mode
      </a>
    </li>
    <li>
      <a id="view-modes-presentation-mode-on">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M2 2H22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M9 10.5L10.2929 9.20711C10.6262 8.87377 10.7929 8.70711 11 8.70711C11.2071 8.70711 11.3738 8.87377 11.7071 9.20711L12.2929 9.79289C12.6262 10.1262 12.7929 10.2929 13 10.2929C13.2071 10.2929 13.3738 10.1262 13.7071 9.79289L15 8.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M12 21L12 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M10 22L12 21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M14 22L12 21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M4 2V10.5C4 13.5641 4 15.0962 5.00421 16.0481C6.00841 17 7.62465 17 10.8571 17H13.1429C16.3753 17 17.9916 17 18.9958 16.0481C20 15.0962 20 13.5641 20 10.5V10M20 2V6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          Activate Presentation Mode
      </a>
    </li>
  </ul>
</nav>

  
<style is:global>
  /* body.view-modes-zen-mode *:is(:not(:is(:has(main), main, main *, :has(#view-modes-zen-mode-off), #view-modes-zen-mode-off, #view-modes-zen-mode-off *, :has(.starlight-image-zoom-dialog), .starlight-image-zoom-dialog, .starlight-image-zoom-dialog *))) {
    display: none;
  } */

  body.view-modes-zen-mode.view-modes-zen-mode-header-disabled header {
    display: none;
  }

  body.view-modes-zen-mode.view-modes-zen-mode-sidebar-disabled #starlight__sidebar {
    display: none;
  }

  body.view-modes-zen-mode.view-modes-zen-mode-table-of-contents-disabled .right-sidebar-container {
    display: none;
  }

  body.view-modes-zen-mode.view-modes-zen-mode-footer-disabled footer {
    display: none;
  }

  body.view-modes-zen-mode.view-modes-zen-mode-header-disabled .sidebar-pane {
    /* inset-block-start: calc(var(--sl-nav-height) + 1.5rem * 2 + 1rem + var(--sl-text-h1) * var(--sl-line-height-headings)); */
    inset-block-start: 0;
  }

  @media (min-width: 50rem) {
    body.view-modes-zen-mode.view-modes-zen-mode-sidebar-enabled main {
      width: calc(100vw - var(--sl-sidebar-width) - var(--sl-sidebar-pad-x));
      margin-left: var(--sl-sidebar-width);
    }
  }

  /* body.view-modes-zen-mode.view-modes-zen-mode-header-enabled.view-modes-zen-mode-sidebar-disabled site-search button {
    margin: auto;
  } */

  body.view-modes-zen-mode.view-modes-zen-mode-sidebar-disabled main {
    width: calc(100vw - var(--sl-sidebar-pad-x));
  }

  body.view-modes-zen-mode main .sl-container {
    margin: 0 auto;
  }

  body.view-modes-zen-mode .main-frame {
    padding-inline: 0;
  }

body.view-modes-zen-mode {
  overflow-x: hidden;
}
</style>

<style>
  #view-modes-activation {
    margin-top: 0.83em;
  }

  #view-modes-activation-list {
    padding: 0;
    list-style: none;
  }

  :is(#view-modes-zen-mode-on, #view-modes-presentation-mode-on) {
    background: none;
    border: none;
    margin: 0;
    padding: 0;
    cursor: pointer;
  }

  :is(#view-modes-zen-mode-on, #view-modes-presentation-mode-on) > svg {
    transform: translateY(0.2em);
  }

</style>
  
<script>
  import config from 'virtual:starlight-view-modes-config';
  import { deactivateAllModes, activateZenMode, activatePresentationMode } from '../libs/SharedMethods';

  document.addEventListener('DOMContentLoaded', () => {
    const modes = document.getElementById('view-modes-activation');
    const zenModeOn = document.getElementById('view-modes-zen-mode-on');
    const presentationModeOn = document.getElementById('view-modes-presentation-mode-on');
    
    const zenMode = sessionStorage.getItem('viewModesZenMode') === 'true';
    const presentationMode = sessionStorage.getItem('viewModesPresentationMode') === 'true';

    if (!config.zenModeEnabled && !config.presentationModeEnabled) {
      modes?.style.setProperty('display', 'none');
    }

    if (!config.zenModeEnabled) {
      zenModeOn?.style.setProperty('display', 'none');
    }
    else {
      zenModeOn?.addEventListener('click', () => {
        deactivateAllModes();
        activateZenMode();
      });
    }

    if (!config.presentationModeEnabled) {
      presentationModeOn?.style.setProperty('display', 'none');
    }
    else {
      presentationModeOn?.addEventListener('click', () => {
        deactivateAllModes();
        activatePresentationMode();
      });
    }  

    // Session storage
    if (zenMode) {
      activateZenMode();
    }
    if (presentationMode) {
      activatePresentationMode();
    }
  });
</script>
